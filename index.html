<!doctype html>
<html lang="en-GB">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø</text></svg>"
    />
    <title>Scottish Property Purchase Calculator</title>
    <link rel="stylesheet" href="styles.css" />
    <script>
      // Apply theme immediately to prevent flash
      (function () {
        const THEME_STORAGE_KEY = 'scottishPropertyCalculator_theme';
        const savedTheme = localStorage.getItem(THEME_STORAGE_KEY);

        let theme = 'light';

        if (savedTheme) {
          // If saved theme is 'auto', determine from system preference
          if (savedTheme === 'auto') {
            if (
              window.matchMedia &&
              window.matchMedia('(prefers-color-scheme: dark)').matches
            ) {
              theme = 'dark';
            } else {
              theme = 'light';
            }
          } else {
            theme = savedTheme;
          }
        } else if (
          window.matchMedia &&
          window.matchMedia('(prefers-color-scheme: dark)').matches
        ) {
          theme = 'dark';
        }

        if (theme === 'dark') {
          document.documentElement.setAttribute('data-theme', 'dark');
        }
      })();
    </script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1 class="page-title">Scottish Property Purchase Calculator</h1>
        <p class="subtitle">
          Calculate mortgage affordability and cash requirements for your
          Scottish property purchase
        </p>
        <div class="header-buttons">
          <button
            type="button"
            class="theme-toggle"
            id="js-themeToggle"
            aria-label="Toggle theme mode (light/dark/auto)"
          >
            <span id="js-themeIcon">üåô</span>
          </button>
          <button
            type="button"
            class="reset-button"
            id="js-resetButton"
            aria-label="Reset all inputs to default values"
          >
            Reset to Defaults
          </button>
        </div>
      </header>

      <div class="calculator-grid">
        <!-- Property Being Purchased -->
        <div class="card">
          <h2 class="card-title">Property Being Purchased</h2>
          <div class="form-group">
            <label for="js-homeReportValue">Home Report Value</label>
            <div class="input-prefix">
              <input
                type="number"
                id="js-homeReportValue"
                step="1000"
                value="250000"
              />
            </div>
          </div>
          <div class="form-group">
            <label for="js-bidAmount">Bid Amount</label>
            <div class="input-prefix">
              <input
                type="number"
                id="js-bidAmount"
                step="1000"
                value="265000"
              />
            </div>
          </div>
          <div class="form-group">
            <label for="js-buyingSolicitorFeesUpfront"
              >Buying Solicitor Fees (Upfront)</label
            >
            <div class="input-prefix">
              <input
                type="number"
                id="js-buyingSolicitorFeesUpfront"
                step="100"
                value="500"
              />
            </div>
          </div>
          <div class="form-group">
            <label for="js-buyingSolicitorFeesAtSale"
              >Buying Solicitor Fees (At Sale)</label
            >
            <div class="input-prefix">
              <input
                type="number"
                id="js-buyingSolicitorFeesAtSale"
                step="100"
                value="1500"
              />
            </div>
          </div>
        </div>

        <!-- Existing Property Being Sold -->
        <div class="card">
          <h2 class="card-title">Existing Property Being Sold</h2>
          <div class="form-group">
            <label for="js-expectedSaleValue">Expected Sale Value</label>
            <div class="input-prefix">
              <input
                type="number"
                id="js-expectedSaleValue"
                step="1000"
                value="180000"
              />
            </div>
          </div>
          <div class="form-group">
            <label for="js-existingMortgage">Existing Mortgage Balance</label>
            <div class="input-prefix">
              <input
                type="number"
                id="js-existingMortgage"
                step="1000"
                value="120000"
              />
            </div>
          </div>
          <div class="form-group">
            <label for="js-sellingSolicitorFeesUpfront"
              >Selling Solicitor Fees (Upfront)</label
            >
            <div class="input-prefix">
              <input
                type="number"
                id="js-sellingSolicitorFeesUpfront"
                step="100"
                value="500"
              />
            </div>
          </div>
          <div class="form-group">
            <label for="js-sellingSolicitorFeesAtSale"
              >Selling Solicitor Fees (At Sale)</label
            >
            <div class="input-prefix">
              <input
                type="number"
                id="js-sellingSolicitorFeesAtSale"
                step="100"
                value="1500"
              />
            </div>
          </div>
        </div>

        <!-- Available Funds -->
        <div class="card">
          <h2 class="card-title">Available Funds</h2>
          <div class="form-group">
            <label for="js-cashAvailable">Cash Available</label>
            <div class="input-prefix">
              <input
                type="number"
                id="js-cashAvailable"
                step="1000"
                value="20000"
              />
            </div>
          </div>
        </div>

        <!-- New Mortgage Parameters -->
        <div class="card">
          <h2 class="card-title">New Mortgage Parameters</h2>
          <div class="form-group">
            <label for="js-interestRate">Interest Rate</label>
            <div class="input-suffix" data-suffix="%">
              <input
                type="number"
                id="js-interestRate"
                step="0.01"
                value="4.5"
                min="0"
              />
            </div>
          </div>
          <div class="form-group">
            <label for="js-mortgageTerm">Mortgage Term</label>
            <div class="input-suffix" data-suffix="years">
              <input
                type="number"
                id="js-mortgageTerm"
                step="1"
                value="25"
                min="0"
              />
            </div>
          </div>
        </div>

        <!-- Results Section -->
        <div class="card results-section">
          <h2 class="card-title">Results</h2>

          <h3 class="section-heading">Primary Outputs</h3>
          <div class="results-grid">
            <div class="result-item">
              <div class="result-label">Monthly Mortgage Payment</div>
              <div class="result-value" id="js-monthlyPayment">¬£0.00</div>
              <div class="result-description" id="js-monthlyPaymentDesc"></div>
            </div>
            <div class="result-item">
              <div class="result-label">Overbid Amount</div>
              <div class="result-value" id="js-overbidAmount">¬£0.00</div>
              <div class="result-description" id="js-overbidAmountDesc"></div>
            </div>
            <div class="result-item">
              <div class="result-label">Cash Used Before Purchase</div>
              <div class="result-value" id="js-cashUsedBeforePurchase">
                ¬£0.00
              </div>
              <div
                class="result-description"
                id="js-cashUsedBeforePurchaseDesc"
              ></div>
            </div>
            <div class="result-item">
              <div class="result-label">Total Amount Borrowed</div>
              <div class="result-value" id="js-mortgageAmount">¬£0.00</div>
              <div class="result-description" id="js-mortgageAmountDesc"></div>
            </div>
          </div>

          <h3 class="section-heading">Supporting Information</h3>
          <div class="results-grid">
            <div class="result-item">
              <div class="result-label">LBTT</div>
              <div class="result-value" id="js-lbtt">¬£0.00</div>
              <div class="result-description" id="js-lbttDesc"></div>
            </div>
            <div class="result-item">
              <div class="result-label">Equity from House Sale</div>
              <div class="result-value" id="js-equityFromSale">¬£0.00</div>
              <div class="result-description" id="js-equityFromSaleDesc"></div>
            </div>
            <div class="result-item">
              <div class="result-label">Total Funds After Sale</div>
              <div class="result-value" id="js-totalFundsAfterSale">¬£0.00</div>
              <div
                class="result-description"
                id="js-totalFundsAfterSaleDesc"
              ></div>
            </div>
            <div class="result-item">
              <div class="result-label">Required Deposit</div>
              <div class="result-value" id="js-requiredDeposit">¬£0.00</div>
              <div class="result-description" id="js-requiredDepositDesc"></div>
            </div>
            <div class="result-item">
              <div class="result-label">LTV Percentage</div>
              <div class="result-value" id="js-ltvPercentage">0.00%</div>
              <div class="result-description" id="js-ltvPercentageDesc"></div>
            </div>
            <div class="result-item">
              <div class="result-label">Overbid Percentage</div>
              <div class="result-value" id="js-overbidPercentage">0.00%</div>
              <div
                class="result-description"
                id="js-overbidPercentageDesc"
              ></div>
            </div>
          </div>

          <div class="share-section">
            <button
              id="js-copyUrlButton"
              class="copy-url-button"
              type="button"
              aria-label="Copy current URL with all settings to clipboard for sharing"
            >
              <span id="js-copyUrlIcon" aria-hidden="true">üîó</span>
              <span id="js-copyUrlText">Copy URL to Share</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-content">
        <p class="footer-made-by">
          made with üçî by Joseph Shambrook
          <a
            href="https://github.com/josephshambrook/scottish-property-purchase-calculator"
            target="_blank"
            rel="noopener noreferrer"
            class="footer-link"
          >
            View on GitHub
          </a>
        </p>
        <p class="footer-disclaimer">
          <strong>Disclaimer:</strong> This calculator is for informational
          purposes only and should not be considered financial advice. Always
          consult with a qualified mortgage advisor or financial professional
          before making property purchase decisions.
        </p>
      </div>
    </footer>

    <script src="script.js"></script>
  </body>
</html>
